# cloudflare-ddns

DDNS-клиент для обновления IP-адреса с помощью бесплатного DNS сервиса от CloudFlare, используя API.


Если нашлись какие-либо баги или недоработки, то оставляйте свои заявки в разделе [**Issues**](https://github.com/prog-it/cloudflare-ddns/issues)

Историю изменений можно посмотреть [здесь](https://github.com/prog-it/cloudflare-ddns/releases). Версия DDNS-клиента находится в файле: "inc/version.txt"


## Основные особенности
- Возможность обновления нескольких DNS записей
- Поддержка IPv4 и IPv6
- Асинхронное обновление DNS записей с IPv4 и IPv6
- Возможность добавить несколько URL-сервисов получения текущего IP адреса. URL сервиса будет выбран случайным образом
- Возможность указать количество попыток получения текущего IP адреса. Если IP получить не удалось, будет выбран другой URL-сервиса
- Выбор режима обновления: только IPv4, только IPv6 или IPv4 и IPv6 одновременно
- Если указанная DNS запись отсутствует, то она будет создана автоматически
- Выбор режима ЛОГа: полный, краткий, отключить
- Возможность указать максимальный размер ЛОГ файла. При превышении этого размера, файл будет очищен
- !!! Если для DNS записи (Например: my.computer.example.com) используется несколько IP адресов, то будет обновлен IP только у первой по счету


## Как использовать
1. Скачать скрипт как ZIP-архив или выполнить: ``git clone https://github.com/prog-it/cloudflare-ddns.git``
2. Перейти в папку со скриптом: ``cd cloudflare-ddns``
3. Сделать копию файла "inc/config.php.sample": ``cp inc/config.php.sample inc/config.php``
4. Настроить параметры в конфиг-файле "inc/config.php". В нем есть подробные комментарии
5. Создать CRON задачу обновления IP. Вместо cron_key указать ключ запуска CRON из конфиг-файла (находится в самом низу)

``*/5 * * * * /path/to/cloudflare-ddns/ddns.php --token="cron_key"``


## Системные требования
- PHP 5.3 и выше
- PHP библиотеки: cURL


## Лицензия

DDNS-клиент распространяется под лицензией *BSD-3-Clause (New BSD License)*.

